{
  "name": "Wardrobe Manager API",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "auth/register",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "webhook-register",
      "name": "Register Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [260, 200],
      "webhookId": "auth-register-v3"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "auth/login",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "webhook-login",
      "name": "Login Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [260, 400],
      "webhookId": "auth-login-v3"
    },
    {
      "parameters": {
        "httpMethod": "GET",
        "path": "auth/me",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "webhook-me",
      "name": "Get Me Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [260, 600],
      "webhookId": "auth-me-v3"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "ai/chat",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "webhook-ai-chat",
      "name": "AI Chat Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [260, 800],
      "webhookId": "ai-chat-v3"
    },
    {
      "parameters": {
        "jsCode": "// Register User\nconst body = $input.first().json.body || {};\n\nif (!body.email || !body.password) {\n  return [{ json: { success: false, error: 'Email and password are required' } }];\n}\n\nconst crypto = require('crypto');\nconst hash = crypto.createHash('md5').update(body.email.toLowerCase()).digest('hex');\nconst userId = 'user_' + hash.substring(0, 12);\nconst now = Date.now();\n\nconst tokenPayload = {\n  id: userId,\n  email: body.email,\n  iat: now,\n  exp: now + 86400000\n};\n\nconst accessToken = Buffer.from(JSON.stringify(tokenPayload)).toString('base64');\nconst refreshToken = Buffer.from(JSON.stringify({ ...tokenPayload, type: 'refresh', exp: now + 604800000 })).toString('base64');\n\nconst user = {\n  id: userId,\n  email: body.email,\n  name: body.name || body.email.split('@')[0],\n  gender: body.gender || null\n};\n\nreturn [{ json: { success: true, user, accessToken, refreshToken } }];"
      },
      "id": "code-register",
      "name": "Process Register",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [480, 200]
    },
    {
      "parameters": {
        "jsCode": "// Login User\nconst body = $input.first().json.body || {};\n\nif (!body.email || !body.password) {\n  return [{ json: { success: false, error: 'Email and password are required' } }];\n}\n\nconst crypto = require('crypto');\nconst hash = crypto.createHash('md5').update(body.email.toLowerCase()).digest('hex');\nconst userId = 'user_' + hash.substring(0, 12);\nconst now = Date.now();\n\nconst tokenPayload = {\n  id: userId,\n  email: body.email,\n  iat: now,\n  exp: now + 86400000\n};\n\nconst accessToken = Buffer.from(JSON.stringify(tokenPayload)).toString('base64');\nconst refreshToken = Buffer.from(JSON.stringify({ ...tokenPayload, type: 'refresh', exp: now + 604800000 })).toString('base64');\n\nconst user = {\n  id: userId,\n  email: body.email,\n  name: body.email.split('@')[0]\n};\n\nreturn [{ json: { success: true, user, accessToken, refreshToken } }];"
      },
      "id": "code-login",
      "name": "Process Login",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [480, 400]
    },
    {
      "parameters": {
        "jsCode": "// Get Current User\nconst headers = $input.first().json.headers || {};\nconst authHeader = headers.authorization || headers.Authorization || '';\n\nif (!authHeader.startsWith('Bearer ')) {\n  return [{ json: { success: false, error: 'Unauthorized' } }];\n}\n\ntry {\n  const token = authHeader.replace('Bearer ', '');\n  const decoded = JSON.parse(Buffer.from(token, 'base64').toString('utf8'));\n  \n  if (decoded.exp < Date.now()) {\n    return [{ json: { success: false, error: 'Token expired' } }];\n  }\n  \n  return [{ json: { success: true, id: decoded.id, email: decoded.email, name: decoded.email.split('@')[0] } }];\n} catch (e) {\n  return [{ json: { success: false, error: 'Invalid token' } }];\n}"
      },
      "id": "code-me",
      "name": "Process Get Me",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [480, 600]
    },
    {
      "parameters": {
        "jsCode": "// AI Chat - Simple response without OpenAI\nconst body = $input.first().json.body || {};\nconst message = body.message || '';\n\nconst responses = [\n  'ðŸ‘‹ Ð—Ð´Ñ€Ð°Ð²ÐµÐ¹Ñ‚Ðµ! ÐÐ· ÑÑŠÐ¼ Ð²Ð°ÑˆÐ¸ÑÑ‚ AI ÑÑ‚Ð¸Ð»Ð¸ÑÑ‚. ÐšÐ°Ðº Ð¼Ð¾Ð³Ð° Ð´Ð° Ð²Ð¸ Ð¿Ð¾Ð¼Ð¾Ð³Ð½Ð° Ð´Ð½ÐµÑ?',\n  'ðŸ‘” Ð—Ð° Ð¾Ñ„Ð¸Ñ†Ð¸Ð°Ð»Ð½Ð° ÑÑ€ÐµÑ‰Ð° Ð¿Ñ€ÐµÐ¿Ð¾Ñ€ÑŠÑ‡Ð²Ð°Ð¼ ÐºÐ»Ð°ÑÐ¸Ñ‡ÐµÑÐºÐ¸ ÑÑ‚Ð¸Ð» - Ñ€Ð¸Ð·Ð° Ñ Ð¿Ð°Ð½Ñ‚Ð°Ð»Ð¾Ð½ Ð¸Ð»Ð¸ ÐµÐ»ÐµÐ³Ð°Ð½Ñ‚Ð½Ð° Ñ€Ð¾ÐºÐ»Ñ.',\n  'ðŸŒž Ð—Ð° Ñ‚Ð¾Ð¿Ð»Ð¾ Ð²Ñ€ÐµÐ¼Ðµ Ð¸Ð·Ð±ÐµÑ€ÐµÑ‚Ðµ Ð»ÐµÐºÐ¸, Ð´Ð¸ÑˆÐ°Ñ‰Ð¸ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð¸ Ð² ÑÐ²ÐµÑ‚Ð»Ð¸ Ñ†Ð²ÐµÑ‚Ð¾Ð²Ðµ.',\n  'â„ï¸ Ð—Ð° ÑÑ‚ÑƒÐ´ÐµÐ½Ð¾ Ð²Ñ€ÐµÐ¼Ðµ Ð¿Ñ€ÐµÐ¿Ð¾Ñ€ÑŠÑ‡Ð²Ð°Ð¼ Ð¿Ð»Ð°ÑÑ‚Ð¾Ð²Ðµ - Ñ‚ÐµÑ€Ð¼Ð¾ Ð±ÐµÐ»ÑŒÐ¾, Ð¿ÑƒÐ»Ð¾Ð²ÐµÑ€ Ð¸ Ñ‚Ð¾Ð¿Ð»Ð¾ ÑÐºÐµ.',\n  'ðŸŽ‰ Ð—Ð° Ð¿Ð°Ñ€Ñ‚Ð¸ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð´Ð° ÐµÐºÑÐ¿ÐµÑ€Ð¸Ð¼ÐµÐ½Ñ‚Ð¸Ñ€Ð°Ñ‚Ðµ Ñ Ð¿Ð¾-ÑÐ¼ÐµÐ»Ð¸ Ñ†Ð²ÐµÑ‚Ð¾Ð²Ðµ Ð¸ Ð°ÐºÑÐµÑÐ¾Ð°Ñ€Ð¸!',\n  'ðŸ’¼ Ð—Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ð° Ð¸Ð·Ð±ÐµÑ€ÐµÑ‚Ðµ Ð½ÐµÑƒÑ‚Ñ€Ð°Ð»Ð½Ð¸ Ñ†Ð²ÐµÑ‚Ð¾Ð²Ðµ Ð¸ ÑƒÐ´Ð¾Ð±Ð½Ð¸, Ð½Ð¾ ÐµÐ»ÐµÐ³Ð°Ð½Ñ‚Ð½Ð¸ Ð´Ñ€ÐµÑ…Ð¸.',\n  'ðŸƒ Ð—Ð° ÑÐ¿Ð¾Ñ€Ñ‚ Ð¸Ð·Ð±ÐµÑ€ÐµÑ‚Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»Ð½Ð¸ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð¸, ÐºÐ¾Ð¸Ñ‚Ð¾ Ð¾Ñ‚Ð²ÐµÐ¶Ð´Ð°Ñ‚ Ð²Ð»Ð°Ð³Ð°Ñ‚Ð°.'\n];\n\nlet response;\nconst lowerMessage = message.toLowerCase();\n\nif (lowerMessage.includes('Ð¾Ñ„Ð¸Ñ†Ð¸Ð°Ð»') || lowerMessage.includes('ÑÑ€ÐµÑ‰Ð°') || lowerMessage.includes('Ð±Ð¸Ð·Ð½ÐµÑ')) {\n  response = responses[1];\n} else if (lowerMessage.includes('Ñ‚Ð¾Ð¿Ð»') || lowerMessage.includes('Ð»ÑÑ‚Ð¾') || lowerMessage.includes('Ð³Ð¾Ñ€ÐµÑ‰')) {\n  response = responses[2];\n} else if (lowerMessage.includes('ÑÑ‚ÑƒÐ´') || lowerMessage.includes('Ð·Ð¸Ð¼Ð°') || lowerMessage.includes('ÑÑ‚ÑƒÐ´ÐµÐ½Ð¾')) {\n  response = responses[3];\n} else if (lowerMessage.includes('Ð¿Ð°Ñ€Ñ‚Ð¸') || lowerMessage.includes('Ð¿Ñ€Ð°Ð·Ð½Ð¸Ðº') || lowerMessage.includes('ÐºÑƒÐ¿Ð¾Ð½')) {\n  response = responses[4];\n} else if (lowerMessage.includes('Ñ€Ð°Ð±Ð¾Ñ‚Ð°') || lowerMessage.includes('Ð¾Ñ„Ð¸Ñ')) {\n  response = responses[5];\n} else if (lowerMessage.includes('ÑÐ¿Ð¾Ñ€Ñ‚') || lowerMessage.includes('Ñ„Ð¸Ñ‚Ð½ÐµÑ') || lowerMessage.includes('Ñ‚Ñ€ÐµÐ½Ð¸Ñ€Ð¾Ð²ÐºÐ°')) {\n  response = responses[6];\n} else {\n  response = responses[0];\n}\n\nreturn [{ json: { success: true, message: response, sessionId: 'session_' + Date.now() } }];"
      },
      "id": "code-ai-chat",
      "name": "Process AI Chat",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [480, 800]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ $json }}",
        "options": {
          "responseHeaders": {
            "entries": [
              { "name": "Access-Control-Allow-Origin", "value": "*" },
              { "name": "Access-Control-Allow-Methods", "value": "GET, POST, PUT, DELETE, OPTIONS" },
              { "name": "Access-Control-Allow-Headers", "value": "Content-Type, Authorization" }
            ]
          }
        }
      },
      "id": "respond-register",
      "name": "Respond Register",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [700, 200]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ $json }}",
        "options": {
          "responseHeaders": {
            "entries": [
              { "name": "Access-Control-Allow-Origin", "value": "*" },
              { "name": "Access-Control-Allow-Methods", "value": "GET, POST, PUT, DELETE, OPTIONS" },
              { "name": "Access-Control-Allow-Headers", "value": "Content-Type, Authorization" }
            ]
          }
        }
      },
      "id": "respond-login",
      "name": "Respond Login",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [700, 400]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ $json }}",
        "options": {
          "responseHeaders": {
            "entries": [
              { "name": "Access-Control-Allow-Origin", "value": "*" },
              { "name": "Access-Control-Allow-Methods", "value": "GET, POST, PUT, DELETE, OPTIONS" },
              { "name": "Access-Control-Allow-Headers", "value": "Content-Type, Authorization" }
            ]
          }
        }
      },
      "id": "respond-me",
      "name": "Respond Me",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [700, 600]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ $json }}",
        "options": {
          "responseHeaders": {
            "entries": [
              { "name": "Access-Control-Allow-Origin", "value": "*" },
              { "name": "Access-Control-Allow-Methods", "value": "GET, POST, PUT, DELETE, OPTIONS" },
              { "name": "Access-Control-Allow-Headers", "value": "Content-Type, Authorization" }
            ]
          }
        }
      },
      "id": "respond-ai-chat",
      "name": "Respond AI Chat",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [700, 800]
    }
  ],
  "connections": {
    "Register Webhook": {
      "main": [[{ "node": "Process Register", "type": "main", "index": 0 }]]
    },
    "Process Register": {
      "main": [[{ "node": "Respond Register", "type": "main", "index": 0 }]]
    },
    "Login Webhook": {
      "main": [[{ "node": "Process Login", "type": "main", "index": 0 }]]
    },
    "Process Login": {
      "main": [[{ "node": "Respond Login", "type": "main", "index": 0 }]]
    },
    "Get Me Webhook": {
      "main": [[{ "node": "Process Get Me", "type": "main", "index": 0 }]]
    },
    "Process Get Me": {
      "main": [[{ "node": "Respond Me", "type": "main", "index": 0 }]]
    },
    "AI Chat Webhook": {
      "main": [[{ "node": "Process AI Chat", "type": "main", "index": 0 }]]
    },
    "Process AI Chat": {
      "main": [[{ "node": "Respond AI Chat", "type": "main", "index": 0 }]]
    }
  },
  "settings": { "executionOrder": "v1" },
  "staticData": null,
  "tags": [],
  "triggerCount": 4,
  "updatedAt": "2025-12-04T14:00:00.000Z",
  "versionId": "3"
}
