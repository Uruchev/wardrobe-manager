# Fashion Advisor - Supabase Setup Guide

## üöÄ –°—Ç—ä–ø–∫–∏ –∑–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ Supabase

### 1. –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ Supabase –ø—Ä–æ–µ–∫—Ç

1. –û—Ç–∏–¥–∏ –Ω–∞ [supabase.com](https://supabase.com)
2. –ö–ª–∏–∫–Ω–∏ "Start your project"
3. –í–ª–µ–∑ —Å GitHub –∞–∫–∞—É–Ω—Ç
4. –ö–ª–∏–∫–Ω–∏ "New Project"
5. –ò–∑–±–µ—Ä–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∏ –ø–æ–ø—ä–ª–Ω–∏:
   - **Project name:** `fashion-advisor`
   - **Database Password:** (–∑–∞–ø–∞–∑–∏ –≥–æ –Ω–∞ —Å–∏–≥—É—Ä–Ω–æ –º—è—Å—Ç–æ!)
   - **Region:** –ò–∑–±–µ—Ä–∏ –Ω–∞–π-–±–ª–∏–∑–∫–∏—è –¥–æ —Ç–µ–± —Ä–µ–≥–∏–æ–Ω
6. –ò–∑—á–∞–∫–∞–π –Ω—è–∫–æ–ª–∫–æ –º–∏–Ω—É—Ç–∏ –ø—Ä–æ–µ–∫—Ç—ä—Ç –¥–∞ —Å–µ —Å—ä–∑–¥–∞–¥–µ

### 2. –ù–∞–º–∏—Ä–∞–Ω–µ –Ω–∞ API –∫–ª—é—á–æ–≤–µ

–°–ª–µ–¥ –∫–∞—Ç–æ –ø—Ä–æ–µ–∫—Ç—ä—Ç –µ –≥–æ—Ç–æ–≤:

1. –û—Ç–∏–¥–∏ –≤ **Project Settings** (–∏–∫–æ–Ω–∞—Ç–∞ —Å –∑—ä–±—á–∞—Ç–∫–∞ –¥–æ–ª—É –≤–ª—è–≤–æ)
2. –ö–ª–∏–∫–Ω–∏ **API** –≤ –º–µ–Ω—é—Ç–æ
3. –ö–æ–ø–∏—Ä–∞–π:
   - **Project URL** ‚Üí –¢–æ–≤–∞ –µ `SUPABASE_URL`
   - **anon public** key ‚Üí –¢–æ–≤–∞ –µ `SUPABASE_ANON_KEY`

### 3. –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏

1. –í Supabase Dashboard, –æ—Ç–∏–¥–∏ –Ω–∞ **SQL Editor**
2. –ö–ª–∏–∫–Ω–∏ **New Query**
3. –ö–æ–ø–∏—Ä–∞–π —Ü—è–ª–æ—Ç–æ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ –æ—Ç `schema.sql`
4. –ö–ª–∏–∫–Ω–∏ **Run** (–∏–ª–∏ Ctrl+Enter)
5. –ü—Ä–æ–≤–µ—Ä–∏ —á–µ –Ω—è–º–∞ –≥—Ä–µ—à–∫–∏

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ Storage buckets

1. –û—Ç–∏–¥–∏ –Ω–∞ **Storage** –≤ –º–µ–Ω—é—Ç–æ
2. –ö–ª–∏–∫–Ω–∏ **New bucket** –∏ —Å—ä–∑–¥–∞–π:
   - `clothing-images` (Public: ‚úÖ)
   - `outfit-previews` (Public: ‚úÖ)
   - `avatars` (Public: ‚úÖ)

### 5. Storage Policies

–ó–∞ –≤—Å–µ–∫–∏ bucket, –¥–æ–±–∞–≤–∏ policy:

1. –ö–ª–∏–∫–Ω–∏ –Ω–∞ bucket ‚Üí **Policies**
2. –î–æ–±–∞–≤–∏ policy –∑–∞ INSERT:
   ```sql
   (bucket_id = 'clothing-images' AND auth.uid()::text = (storage.foldername(name))[1])
   ```
3. –î–æ–±–∞–≤–∏ policy –∑–∞ SELECT (public read):
   ```sql
   true
   ```

### 6. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ

–†–µ–¥–∞–∫—Ç–∏—Ä–∞–π `src/config/supabase.ts`:

```typescript
const SUPABASE_URL = 'https://—Ç–≤–æ—è—Ç-–ø—Ä–æ–µ–∫—Ç.supabase.co';
const SUPABASE_ANON_KEY = '—Ç–≤–æ—è—Ç-anon-–∫–ª—é—á';
```

### 7. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ Authentication

1. –û—Ç–∏–¥–∏ –Ω–∞ **Authentication** ‚Üí **Providers**
2. –ü–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ Email –µ –≤–∫–ª—é—á–µ–Ω
3. –ú–æ–∂–µ—à –¥–∞ –¥–æ–±–∞–≤–∏—à –∏ –¥—Ä—É–≥–∏:
   - Google
   - Apple
   - Facebook

–ó–∞ Google OAuth:
1. –û—Ç–∏–¥–∏ –≤ Google Cloud Console
2. –°—ä–∑–¥–∞–π OAuth credentials
3. –î–æ–±–∞–≤–∏ Client ID –∏ Secret –≤ Supabase

---

## üìä –°—Ö–µ–º–∞ –Ω–∞ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏

```
profiles           - –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–∏ –ø—Ä–æ—Ñ–∏–ª–∏
clothing_items     - –î—Ä–µ—Ö–∏ –≤ –≥–∞—Ä–¥–µ—Ä–æ–±–∞
outfits           - –ó–∞–ø–∞–∑–µ–Ω–∏ –∞—É—Ç—Ñ–∏—Ç–∏
wear_log          - –õ–æ–≥ –Ω–∞ –Ω–æ—Å–µ–Ω–∏—è—Ç–∞ (–∑–∞ CPW)
ai_conversations  - –ò—Å—Ç–æ—Ä–∏—è –Ω–∞ AI —á–∞—Ç–∞
calendar_events   - –ü–ª–∞–Ω–∏—Ä–∞–Ω–∏ –∞—É—Ç—Ñ–∏—Ç–∏
```

## üîê Row Level Security (RLS)

–í—Å–∏—á–∫–∏ —Ç–∞–±–ª–∏—Ü–∏ –∏–º–∞—Ç RLS –∞–∫—Ç–∏–≤–∏—Ä–∞–Ω. –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏—Ç–µ –º–æ–≥–∞—Ç –¥–∞ –≤–∏–∂–¥–∞—Ç –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–∞—Ç –°–ê–ú–û —Å–≤–æ–∏—Ç–µ –¥–∞–Ω–Ω–∏.

## üì∏ Storage —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
clothing-images/
  ‚îî‚îÄ‚îÄ {user_id}/
      ‚îî‚îÄ‚îÄ {item_id}.jpg

outfit-previews/
  ‚îî‚îÄ‚îÄ {user_id}/
      ‚îî‚îÄ‚îÄ {outfit_id}.jpg

avatars/
  ‚îî‚îÄ‚îÄ {user_id}/
      ‚îî‚îÄ‚îÄ avatar.jpg
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

–°–ª–µ–¥ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ç–∞, –ø—Ä–æ–≤–µ—Ä–∏:

1. ‚úÖ –¢–∞–±–ª–∏—Ü–∏—Ç–µ —Å–∞ —Å—ä–∑–¥–∞–¥–µ–Ω–∏ (Database ‚Üí Tables)
2. ‚úÖ RLS policies —Å–∞ –∞–∫—Ç–∏–≤–Ω–∏
3. ‚úÖ Storage buckets —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—Ç
4. ‚úÖ API –∫–ª—é—á–æ–≤–µ—Ç–µ —Å–∞ –¥–æ–±–∞–≤–µ–Ω–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ
