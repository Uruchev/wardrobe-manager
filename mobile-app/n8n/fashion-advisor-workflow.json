{
  "name": "Fashion Advisor AI Stylist",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "ai-stylist",
        "options": {
          "allowedOrigins": "*"
        }
      },
      "id": "f7d8a9b0-1234-5678-90ab-cdef12345678",
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [250, 300],
      "webhookId": "ai-stylist"
    },
    {
      "parameters": {
        "jsCode": "// –ü–æ–¥–≥–æ—Ç–≤–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞ –≥–∞—Ä–¥–µ—Ä–æ–±–∞\nconst body = $input.first().json.body || {};\nconst wardrobe = body.wardrobe || [];\nconst outfits = body.outfits || [];\nconst message = body.message || '';\n\nlet wardrobeContext = '';\n\nif (wardrobe.length > 0) {\n  wardrobeContext = `\\n\\n–ì–∞—Ä–¥–µ—Ä–æ–± –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è (${wardrobe.length} –¥—Ä–µ—Ö–∏):\\n`;\n  \n  // –ì—Ä—É–ø–∏—Ä–∞–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è\n  const categories = {\n    'tops': '–ì–æ—Ä–Ω–∏—Ü–∏',\n    'bottoms': '–î–æ–ª–Ω–∏—Ü–∏', \n    'dresses': '–†–æ–∫–ª–∏',\n    'outerwear': '–í—Ä—ä—Ö–Ω–∏ –¥—Ä–µ—Ö–∏',\n    'shoes': '–û–±—É–≤–∫–∏',\n    'accessories': '–ê–∫—Å–µ—Å–æ–∞—Ä–∏',\n    'bags': '–ß–∞–Ω—Ç–∏',\n    'jewelry': '–ë–∏–∂—É—Ç–∞'\n  };\n  \n  const byCategory = {};\n  wardrobe.forEach(item => {\n    const cat = item.category || 'other';\n    if (!byCategory[cat]) byCategory[cat] = [];\n    byCategory[cat].push(item);\n  });\n  \n  Object.entries(byCategory).forEach(([cat, items]) => {\n    const catName = categories[cat] || cat;\n    wardrobeContext += `\\n${catName}: ${items.map(i => `${i.name} (${i.color}${i.brand ? ', ' + i.brand : ''})`).join(', ')}`;\n  });\n  \n  // –î–æ–±–∞–≤–∏ –ª—é–±–∏–º–∏\n  const favorites = wardrobe.filter(i => i.favorite);\n  if (favorites.length > 0) {\n    wardrobeContext += `\\n\\n–õ—é–±–∏–º–∏ –¥—Ä–µ—Ö–∏: ${favorites.map(i => i.name).join(', ')}`;\n  }\n} else {\n  wardrobeContext = '\\n\\n–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç –≤—Å–µ –æ—â–µ –Ω–µ –µ –¥–æ–±–∞–≤–∏–ª –¥—Ä–µ—Ö–∏ –≤ –≥–∞—Ä–¥–µ—Ä–æ–±–∞ —Å–∏.';\n}\n\nif (outfits && outfits.length > 0) {\n  wardrobeContext += `\\n\\n–°—ä–∑–¥–∞–¥–µ–Ω–∏ –∞—É—Ç—Ñ–∏—Ç–∏ (${outfits.length}): ${outfits.map(o => o.name).join(', ')}`;\n}\n\nreturn {\n  message,\n  wardrobeContext,\n  itemCount: wardrobe.length,\n  outfitCount: outfits ? outfits.length : 0\n};"
      },
      "id": "a1b2c3d4-5678-90ab-cdef-123456789abc",
      "name": "Prepare Context",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [450, 300]
    },
    {
      "parameters": {
        "model": "gpt-4o-mini",
        "messages": {
          "values": [
            {
              "content": "=–¢–∏ —Å–∏ Fashion Advisor - –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–µ–Ω AI —Å—Ç–∏–ª–∏—Å—Ç –∏ –º–æ–¥–µ–Ω –∫–æ–Ω—Å—É–ª—Ç–∞–Ω—Ç. –ü–æ–º–∞–≥–∞—à –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏—Ç–µ –¥–∞ –∏–∑–±–µ—Ä–∞—Ç –∫–∞–∫–≤–æ –¥–∞ –æ–±–ª–µ–∫–∞—Ç, —Å—ä–∑–¥–∞–≤–∞—à —Å—Ç–∏–ª–Ω–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –æ—Ç –¥—Ä–µ—Ö–∏ –∏ –¥–∞–≤–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∏ –º–æ–¥–Ω–∏ —Å—ä–≤–µ—Ç–∏.\n\n## –¢–≤–æ–∏—Ç–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:\n1. –ü—Ä–µ–¥–ª–∞–≥–∞—à –∞—É—Ç—Ñ–∏—Ç–∏ –±–∞–∑–∏—Ä–∞–Ω–∏ –Ω–∞ –ø–æ–≤–æ–¥, –≤—Ä–µ–º–µ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ\n2. –ê–Ω–∞–ª–∏–∑–∏—Ä–∞—à –≥–∞—Ä–¥–µ—Ä–æ–±–∞ –∏ –¥–∞–≤–∞—à –ø—Ä–µ–ø–æ—Ä—ä–∫–∏ –∫–∞–∫–≤–æ –ª–∏–ø—Å–≤–∞\n3. –û–±—è—Å–Ω—è–≤–∞—à –∑–∞—â–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—è—Ç –¥–æ–±—Ä–µ\n4. –î–∞–≤–∞—à —Å—ä–≤–µ—Ç–∏ –∑–∞ —Ü–≤–µ—Ç–æ–≤–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –∏ —Å—Ç–∏–ª–æ–≤–µ\n5. –ü–æ–º–∞–≥–∞—à —Å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –Ω–∞ –≥–∞—Ä–¥–µ—Ä–æ–±–∞\n\n## –ü—Ä–∞–≤–∏–ª–∞:\n- –û—Ç–≥–æ–≤–∞—Ä—è–π –°–ê–ú–û –Ω–∞ –±—ä–ª–≥–∞—Ä—Å–∫–∏ –µ–∑–∏–∫\n- –ë—ä–¥–∏ –ø—Ä–∏—è—Ç–µ–ª—Å–∫–∏, –µ–Ω—Ç—É—Å–∏–∞–∑–∏—Ä–∞–Ω –∏ –Ω–∞—Å—ä—Ä—á–∞–≤–∞—â\n- –ò–∑–ø–æ–ª–∑–≤–∞–π –µ–º–æ–¥–∂–∏—Ç–∞ –∑–∞ –ø–æ-—Ç–æ–ø—ä–ª —Ç–æ–Ω üëóüëî‚ú®üíÉ\n- –ö–æ–≥–∞—Ç–æ –ø—Ä–µ–¥–ª–∞–≥–∞—à –∞—É—Ç—Ñ–∏—Ç, –æ–±—è—Å–Ω–∏ –ó–ê–©–û —Ç–∞–∑–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∏\n- –ê–∫–æ –Ω—è–º–∞—à –¥–æ—Å—Ç–∞—Ç—ä—á–Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –∑–∞–¥–∞–π —É—Ç–æ—á–Ω—è–≤–∞—â–∏ –≤—ä–ø—Ä–æ—Å–∏\n- –î–∞–≤–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏ –∏ –ø—Ä–∞–∫—Ç–∏—á–Ω–∏ —Å—ä–≤–µ—Ç–∏\n\n## –ö–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞ –≥–∞—Ä–¥–µ—Ä–æ–±–∞:{{ $json.wardrobeContext }}\n\n## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n- –û–±—â–æ –¥—Ä–µ—Ö–∏: {{ $json.itemCount }}\n- –°—ä–∑–¥–∞–¥–µ–Ω–∏ –∞—É—Ç—Ñ–∏—Ç–∏: {{ $json.outfitCount }}",
              "role": "system"
            },
            {
              "content": "={{ $json.message }}",
              "role": "user"
            }
          ]
        },
        "options": {
          "temperature": 0.7,
          "maxTokens": 1000
        }
      },
      "id": "b2c3d4e5-6789-0abc-def1-23456789abcd",
      "name": "AI Stylist",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [650, 300]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={\n  \"success\": true,\n  \"message\": {{ JSON.stringify($json.text) }},\n  \"suggestions\": []\n}"
      },
      "id": "c3d4e5f6-7890-abcd-ef12-3456789abcde",
      "name": "Respond",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [850, 300]
    }
  ],
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "Prepare Context",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Prepare Context": {
      "main": [
        [
          {
            "node": "AI Stylist",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Stylist": {
      "main": [
        [
          {
            "node": "Respond",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 0
}
