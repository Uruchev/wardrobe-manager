{
  "name": "Fashion Advisor AI Agent",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "ai-stylist",
        "options": {
          "allowedOrigins": "*"
        }
      },
      "id": "webhook-main",
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [200, 400],
      "webhookId": "ai-stylist"
    },
    {
      "parameters": {
        "jsCode": "// –ü–æ–¥–≥–æ—Ç–≤–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞ –≥–∞—Ä–¥–µ—Ä–æ–±–∞\nconst body = $input.first().json.body || {};\nconst wardrobe = body.wardrobe || [];\nconst outfits = body.outfits || [];\nconst message = body.message || '';\nconst weather = body.weather || null;\n\n// –°—ä–∑–¥–∞–π JSON —Å –≥–∞—Ä–¥–µ—Ä–æ–±–∞ –∑–∞ tools\nconst wardrobeData = JSON.stringify(wardrobe);\nconst outfitsData = JSON.stringify(outfits);\n\nlet contextSummary = '';\n\nif (wardrobe.length > 0) {\n  const categories = {\n    'tops': '–ì–æ—Ä–Ω–∏—Ü–∏',\n    'bottoms': '–î–æ–ª–Ω–∏—Ü–∏', \n    'dresses': '–†–æ–∫–ª–∏',\n    'outerwear': '–í—Ä—ä—Ö–Ω–∏ –¥—Ä–µ—Ö–∏',\n    'shoes': '–û–±—É–≤–∫–∏',\n    'accessories': '–ê–∫—Å–µ—Å–æ–∞—Ä–∏',\n    'bags': '–ß–∞–Ω—Ç–∏',\n    'jewelry': '–ë–∏–∂—É—Ç–∞'\n  };\n  \n  const byCategory = {};\n  wardrobe.forEach(item => {\n    const cat = item.category || 'other';\n    if (!byCategory[cat]) byCategory[cat] = [];\n    byCategory[cat].push(item);\n  });\n  \n  contextSummary = `–ì–∞—Ä–¥–µ—Ä–æ–± (${wardrobe.length} –¥—Ä–µ—Ö–∏): `;\n  Object.entries(byCategory).forEach(([cat, items]) => {\n    const catName = categories[cat] || cat;\n    contextSummary += `${catName}: ${items.length}, `;\n  });\n  \n  const favorites = wardrobe.filter(i => i.favorite);\n  if (favorites.length > 0) {\n    contextSummary += `–õ—é–±–∏–º–∏: ${favorites.map(i => i.name).join(', ')}`;\n  }\n} else {\n  contextSummary = '–ì–∞—Ä–¥–µ—Ä–æ–±—ä—Ç –µ –ø—Ä–∞–∑–µ–Ω.';\n}\n\nreturn {\n  message,\n  contextSummary,\n  wardrobeData,\n  outfitsData,\n  itemCount: wardrobe.length,\n  outfitCount: outfits.length,\n  weather: weather ? `${weather.temperature}¬∞C, ${weather.condition}` : '–ù—è–º–∞ –¥–∞–Ω–Ω–∏'\n};"
      },
      "id": "prepare-context",
      "name": "Prepare Context",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [400, 400]
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "agent-main",
      "name": "AI Stylist Agent",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.7,
      "position": [700, 400]
    },
    {
      "parameters": {
        "model": "gpt-4o-mini",
        "options": {
          "temperature": 0.7
        }
      },
      "id": "openai-model",
      "name": "OpenAI Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [500, 600]
    },
    {
      "parameters": {
        "systemMessage": "=–¢–∏ —Å–∏ Fashion Advisor - –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–µ–Ω AI —Å—Ç–∏–ª–∏—Å—Ç –∏ –º–æ–¥–µ–Ω –∫–æ–Ω—Å—É–ª—Ç–∞–Ω—Ç. –ü–æ–º–∞–≥–∞—à –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏—Ç–µ –¥–∞ –∏–∑–±–µ—Ä–∞—Ç –∫–∞–∫–≤–æ –¥–∞ –æ–±–ª–µ–∫–∞—Ç.\n\n## –¢–≤–æ–∏—Ç–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:\n1. –ü—Ä–µ–¥–ª–∞–≥–∞—à –∞—É—Ç—Ñ–∏—Ç–∏ –±–∞–∑–∏—Ä–∞–Ω–∏ –Ω–∞ –ø–æ–≤–æ–¥, –≤—Ä–µ–º–µ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ\n2. –ê–Ω–∞–ª–∏–∑–∏—Ä–∞—à –≥–∞—Ä–¥–µ—Ä–æ–±–∞ –∏ –¥–∞–≤–∞—à –ø—Ä–µ–ø–æ—Ä—ä–∫–∏\n3. –û–±—è—Å–Ω—è–≤–∞—à –∑–∞—â–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—è—Ç\n4. –î–∞–≤–∞—à —Å—ä–≤–µ—Ç–∏ –∑–∞ —Ü–≤–µ—Ç–æ–≤–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏\n5. –ü–æ–º–∞–≥–∞—à —Å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –Ω–∞ –≥–∞—Ä–¥–µ—Ä–æ–±–∞\n\n## –í–ê–ñ–ù–û - –ò–∑–ø–æ–ª–∑–≤–∞–π tools:\n- –ò–∑–ø–æ–ª–∑–≤–∞–π 'search_wardrobe' –∑–∞ –¥–∞ –Ω–∞–º–µ—Ä–∏—à –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏ –¥—Ä–µ—Ö–∏\n- –ò–∑–ø–æ–ª–∑–≤–∞–π 'suggest_outfit' –∑–∞ –¥–∞ –ø—Ä–µ–¥–ª–æ–∂–∏—à –ø—ä–ª–µ–Ω –∞—É—Ç—Ñ–∏—Ç\n- –ò–∑–ø–æ–ª–∑–≤–∞–π 'analyze_wardrobe' –∑–∞ –∞–Ω–∞–ª–∏–∑ –Ω–∞ –≥–∞—Ä–¥–µ—Ä–æ–±–∞\n- –ò–∑–ø–æ–ª–∑–≤–∞–π 'get_weather_advice' –∑–∞ —Å—ä–≤–µ—Ç–∏ —Å–ø–æ—Ä–µ–¥ –≤—Ä–µ–º–µ—Ç–æ\n\n## –ü—Ä–∞–≤–∏–ª–∞:\n- –û—Ç–≥–æ–≤–∞—Ä—è–π –°–ê–ú–û –Ω–∞ –±—ä–ª–≥–∞—Ä—Å–∫–∏ –µ–∑–∏–∫\n- –ë—ä–¥–∏ –ø—Ä–∏—è—Ç–µ–ª—Å–∫–∏ –∏ –µ–Ω—Ç—É—Å–∏–∞–∑–∏—Ä–∞–Ω üëóüëî‚ú®üíÉ\n- –î–∞–≤–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏ –∏ –ø—Ä–∞–∫—Ç–∏—á–Ω–∏ —Å—ä–≤–µ—Ç–∏\n- –ö–æ–≥–∞—Ç–æ –ø—Ä–µ–¥–ª–∞–≥–∞—à –∞—É—Ç—Ñ–∏—Ç, –æ–±—è—Å–Ω–∏ –ó–ê–©–û —Ä–∞–±–æ—Ç–∏\n\n## –¢–µ–∫—É—â –∫–æ–Ω—Ç–µ–∫—Å—Ç:\n{{ $json.contextSummary }}\n–í—Ä–µ–º–µ: {{ $json.weather }}\n–û–±—â–æ –¥—Ä–µ—Ö–∏: {{ $json.itemCount }}\n–°—ä–∑–¥–∞–¥–µ–Ω–∏ –∞—É—Ç—Ñ–∏—Ç–∏: {{ $json.outfitCount }}"
      },
      "id": "system-prompt",
      "name": "System Prompt",
      "type": "@n8n/n8n-nodes-langchain.outputParserAutofixing",
      "typeVersion": 1,
      "position": [500, 700]
    },
    {
      "parameters": {
        "name": "search_wardrobe",
        "description": "–¢—ä—Ä—Å–∏ –¥—Ä–µ—Ö–∏ –≤ –≥–∞—Ä–¥–µ—Ä–æ–±–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è, —Ü–≤—è—Ç, —Å–µ–∑–æ–Ω –∏–ª–∏ –∫–ª—é—á–æ–≤–∞ –¥—É–º–∞. –í—Ä—ä—â–∞ —Å–ø–∏—Å—ä–∫ —Å –ø–æ–¥—Ö–æ–¥—è—â–∏ –¥—Ä–µ—Ö–∏.",
        "workflowId": "={{ $workflow.id }}",
        "responsePropertyName": "items",
        "fields": {
          "values": [
            {
              "name": "query",
              "description": "–ö–∞–∫–≤–æ —Ç—ä—Ä—Å–∏—à - –º–æ–∂–µ –¥–∞ –µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è (tops, bottoms, shoes), —Ü–≤—è—Ç (—á–µ—Ä–Ω–æ, –±—è–ª–æ), —Å–µ–∑–æ–Ω (–ª—è—Ç–æ, –∑–∏–º–∞) –∏–ª–∏ –∫–ª—é—á–æ–≤–∞ –¥—É–º–∞",
              "type": "string",
              "required": true
            },
            {
              "name": "category",
              "description": "–§–∏–ª—Ç—Ä–∏—Ä–∞–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è: tops, bottoms, dresses, outerwear, shoes, accessories",
              "type": "string",
              "required": false
            }
          ]
        }
      },
      "id": "tool-search",
      "name": "Search Wardrobe",
      "type": "@n8n/n8n-nodes-langchain.toolCode",
      "typeVersion": 1.1,
      "position": [800, 600]
    },
    {
      "parameters": {
        "name": "suggest_outfit",
        "description": "–°—ä–∑–¥–∞–≤–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∑–∞ –ø—ä–ª–µ–Ω –∞—É—Ç—Ñ–∏—Ç –±–∞–∑–∏—Ä–∞–Ω–æ –Ω–∞ –ø–æ–≤–æ–¥, –≤—Ä–µ–º–µ –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ. –í—Ä—ä—â–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –æ—Ç –¥—Ä–µ—Ö–∏ —Å –æ–±—è—Å–Ω–µ–Ω–∏–µ.",
        "workflowId": "={{ $workflow.id }}",
        "responsePropertyName": "outfit",
        "fields": {
          "values": [
            {
              "name": "occasion",
              "description": "–ó–∞ –∫–∞–∫—ä–≤ –ø–æ–≤–æ–¥ –µ –∞—É—Ç—Ñ–∏—Ç—ä—Ç: casual, —Ä–∞–±–æ—Ç–∞, —Å—Ä–µ—â–∞, –ø–∞—Ä—Ç–∏, —Å–ø–æ—Ä—Ç, –æ—Ñ–∏—Ü–∏–∞–ª–Ω–æ",
              "type": "string",
              "required": true
            },
            {
              "name": "style",
              "description": "–ñ–µ–ª–∞–Ω —Å—Ç–∏–ª: –µ–ª–µ–≥–∞–Ω—Ç–µ–Ω, —Å–ø–æ—Ä—Ç–µ–Ω, –µ–∂–µ–¥–Ω–µ–≤–µ–Ω, —Ä–æ–º–∞–Ω—Ç–∏—á–µ–Ω, –±–æ—Ö–æ",
              "type": "string",
              "required": false
            },
            {
              "name": "weather",
              "description": "–í—Ä–µ–º–µ—Ç–æ –Ω–∞–≤—ä–Ω: —Ç–æ–ø–ª–æ, —Å—Ç—É–¥–µ–Ω–æ, –¥—ä–∂–¥–æ–≤–Ω–æ, –ø—Ä–æ–º–µ–Ω–ª–∏–≤–æ",
              "type": "string",
              "required": false
            }
          ]
        }
      },
      "id": "tool-suggest",
      "name": "Suggest Outfit",
      "type": "@n8n/n8n-nodes-langchain.toolCode",
      "typeVersion": 1.1,
      "position": [900, 600]
    },
    {
      "parameters": {
        "name": "analyze_wardrobe",
        "description": "–ê–Ω–∞–ª–∏–∑–∏—Ä–∞ –≥–∞—Ä–¥–µ—Ä–æ–±–∞ –∏ –¥–∞–≤–∞ –ø—Ä–µ–ø–æ—Ä—ä–∫–∏ –∫–∞–∫–≤–æ –ª–∏–ø—Å–≤–∞, –∫–æ–∏ –¥—Ä–µ—Ö–∏ —Å–µ –Ω–æ—Å—è—Ç —Ä—è–¥–∫–æ, –∏ —Å—ä–≤–µ—Ç–∏ –∑–∞ –ø–æ–¥–æ–±—Ä–µ–Ω–∏–µ.",
        "workflowId": "={{ $workflow.id }}",
        "responsePropertyName": "analysis",
        "fields": {
          "values": [
            {
              "name": "focus",
              "description": "–ù–∞ –∫–∞–∫–≤–æ –¥–∞ —Å–µ —Ñ–æ–∫—É—Å–∏—Ä–∞ –∞–Ω–∞–ª–∏–∑—ä—Ç: gaps (–ª–∏–ø—Å–≤–∞—â–∏ –Ω–µ—â–∞), unused (–Ω–µ–Ω–æ—Å–µ–Ω–∏ –¥—Ä–µ—Ö–∏), colors (—Ü–≤–µ—Ç–æ–≤–∞ –ø–∞–ª–∏—Ç—Ä–∞), value (—Å—Ç–æ–π–Ω–æ—Å—Ç)",
              "type": "string",
              "required": false
            }
          ]
        }
      },
      "id": "tool-analyze",
      "name": "Analyze Wardrobe",
      "type": "@n8n/n8n-nodes-langchain.toolCode",
      "typeVersion": 1.1,
      "position": [1000, 600]
    },
    {
      "parameters": {
        "name": "get_style_tips",
        "description": "–î–∞–≤–∞ –º–æ–¥–Ω–∏ —Å—ä–≤–µ—Ç–∏ –∏ tips –∑–∞ —Å—Ç–∏–ª, —Ü–≤–µ—Ç–æ–≤–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏, –∏–ª–∏ –∫–∞–∫ –¥–∞ –Ω–æ—Å–∏—à –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –¥—Ä–µ—Ö–∞.",
        "workflowId": "={{ $workflow.id }}",
        "responsePropertyName": "tips",
        "fields": {
          "values": [
            {
              "name": "topic",
              "description": "–¢–µ–º–∞ –∑–∞ —Å—ä–≤–µ—Ç–∏: —Ü–≤–µ—Ç–æ–≤–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏, –∫–∞–ø—Å—É–ª–µ–Ω –≥–∞—Ä–¥–µ—Ä–æ–±, layering, –∞–∫—Å–µ—Å–æ–∞—Ä–∏, —Å–µ–∑–æ–Ω–Ω–∏ —Ç–µ–Ω–¥–µ–Ω—Ü–∏–∏",
              "type": "string",
              "required": true
            }
          ]
        }
      },
      "id": "tool-tips",
      "name": "Style Tips",
      "type": "@n8n/n8n-nodes-langchain.toolCode",
      "typeVersion": 1.1,
      "position": [1100, 600]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={\n  \"success\": true,\n  \"message\": {{ JSON.stringify($json.output) }},\n  \"suggestions\": []\n}"
      },
      "id": "respond-webhook",
      "name": "Respond",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [950, 400]
    },
    {
      "parameters": {},
      "id": "memory-buffer",
      "name": "Window Buffer Memory",
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [600, 700]
    }
  ],
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "Prepare Context",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Prepare Context": {
      "main": [
        [
          {
            "node": "AI Stylist Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Stylist Agent": {
      "main": [
        [
          {
            "node": "Respond",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Stylist Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Search Wardrobe": {
      "ai_tool": [
        [
          {
            "node": "AI Stylist Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Suggest Outfit": {
      "ai_tool": [
        [
          {
            "node": "AI Stylist Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Analyze Wardrobe": {
      "ai_tool": [
        [
          {
            "node": "AI Stylist Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Style Tips": {
      "ai_tool": [
        [
          {
            "node": "AI Stylist Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Window Buffer Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Stylist Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  }
}
